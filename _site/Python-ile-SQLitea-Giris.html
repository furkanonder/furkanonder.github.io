<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta name="author" content="Furkan Önder"/>
<meta name="description" content="Python ile SQLite kullanımı">
<meta name="google-site-verification" content="iSX4wopS8vut_QMGIFuvlkUTcusGyXroXbqO6AOZ8iA" />
<link rel="icon" href="/assets/images/favicon.ico">
<title>Python ile SQLite’a Giriş</title>
<link rel="stylesheet" href="/assets/css/font-awesome.css">
<link rel="alternate" type="application/rss+xml" title="Furkan Önder - " href="/feed.xml" />
<link href="/assets/css/bootstrap.min.css" rel="stylesheet">
<link href="/assets/css/ie10-viewport-bug-workaround.css" rel="stylesheet">
<link href="/assets/css/custom.css" rel="stylesheet">
</head>
<body>
  <div class="container">
    <div class="navbar navbar-default navbar-fixed-top">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="https://furkanonder.github.io/">furkanönder</a>
    </div>
    <div class="navbar-collapse collapse">
      <ul class="nav navbar-nav navbar-right">
        <li><a href="https://furkanonder.github.io/">Anasayfa</a></li>
        <li><a href="/hakkimda/">Hakkımda</a></li>
        <li><a href="/arsiv/">Arşiv</a></li>
      </ul>
    </div>
  </div>
</div>

<div id="ust" class="row">
  <div class="col-md-12">
    <div class="panel panel-info">
      <div class="panel-heading">
        <h3 class="text-primary">Python ile SQLite’a Giriş</h3>
        <span class="text-muted">
          <time datetime="4 August 2018">
            4 Ağustos 2018
          </time>
      	</span>
      </div>

      <div class="panel-body">
        Merhaba,<br/>
Bu yazımızda Python’da Veritabanı Programlama’ya bir giriş yapıcağız.Bunun için Dolar/Tl kurundaki alış ,satış değerlerini ve bu değerleri elde ettiğimiz tarih ve saati veritabanına kaydeden küçük bir bot yazacağız.Veritabanını, içinde bilgi saklanabilen,birbiriyle ilişkili olan verilerin tutulduğu, yönetilebilir, güncellenebilir ve taşınabilir bilgi topluluğu olarak adlandırabiliriz.<br/><br/>

<b>SQLite Ve Python</b><br/>
SQLite, python programlama dilinde varsayılan olarak gelen bir veritabanıdır. Django ve Flask gibi python ile yazılan Web Frameworklerde de  varsayılan olarak SQLite gelmektedir.SQLite, diğer veritabanlarına göre kolay bir yapıya sahiptir.<br /><br/>

<b>Veritabanımızı Oluşturalım</b><br/>

Öncelikle sqlite3 kütüphanesini kodumuza dahil edelim.
<pre class="brush:python"> import sqlite </pre>
Veritabanımızı connect() methodu ile oluşturalım.
<pre class="brush:python"> vt = sqlite3.connect('kur.db') </pre>
Veritabanı üzerinde işlem yapabilmek bir imleçe ihtiyaç duyarız. cursor() methodu ile imlecimizi oluşturalım.
<pre class="brush:python"> imlec = vt.cursor() </pre>
Tablo oluşturmak için execute methodunu kullanıyoruz.kurTablosu adında bir tablo oluşturalım.Integer türünde sira ;varchar türünde alis, satis ve zaman değerlerine sahip olsun.Sira değişkenine  AUTOINCREMENT özelliği ekleyerek veritabanına veriler eklendikçe sıra değişkeninin artmasını sağlayalım.
<pre class="brush:python">
imlec.execute('''
    CREATE TABLE kurTablosu(
    sira INTEGER PRIMARY KEY AUTOINCREMENT,
    alis VARCHAR,
    satis VARCHAR,
    zaman VARCHAR )''')
</pre>
Verilerimizi veritabanına commit metodu ile işleyelim.

<pre class="brush:python"> vt.commit() </pre>

close() metodu ile veritabanı bağlantımızı kapatalım.

<pre class="brush:python"> vt.close() </pre>

<br/><b>Veritabanı İçin Verilerin Elde Edilmesi</b><br/>

Veritabanına eklemek için Dolar/Tl kurundaki alış ,satış değerlerini elde etmemiz gerekiyor.
Bunu kullanımımıza sunulan bir API ile kolayca yapabiliriz.API, Application Programming Interface(Uygulama Programlama Arayüzü) kelimelerinin baş harflerinden oluşan bir kısaltmadır.
API’ı bir uygulamaya ait işlevlerin başka bir uygulamada kullanılmış bir arayüz olarak tanımlayabiliriz.
(API hakkında daha fazla bilgi edinmek için <a href="http://www.wiki-zero.co/index.php?q=aHR0cHM6Ly9lbi53aWtpcGVkaWEub3JnL3dpa2kvQXBwbGljYXRpb25fcHJvZ3JhbW1pbmdfaW50ZXJmYWNl" target="_blank"> burayı</a> ziyaret edebilirsiniz.)

Dolar/Tl kurundaki alış ve satış değerlerini elde etmek için dolar adında bir fonksiyon yazalım.
<br />
<pre class="brush:python">
def dolar():
    url = 'https://www.doviz.com/api/v1/currencies/USD/latest'
    istek = urllib.request.Request(url)
    i = urllib.request.urlopen(istek).read()
    veri = json.loads(i.decode('utf-8'))

    return veri['buying'], veri['selling']
</pre>
API adresimizi url değişkenine atadık.Request fonksiyonu ile url ‘e bir istek yolladık.urlopen() fonksiyonu ile isteği açtık ve read() fonksiyonu ile okuduk.Okuduğumuz bu isteği  utf-8 türünde çözümleyip json şekline dönüştürdük.Ve son olarak  veri['buying'], veri['selling'] şeklinde alış ve satış değerlerini elde ettik ve bu iki değeri döndürdük.

<br/></br><b>Veritabanına Verilerin Eklenmesi</b><br/>

Dolar() fonksiyonunu kullanarak verilerimizi elde etmiştik.Şimdi ise bu verileri veritabanına eklemeliyiz.Bunun için ise vtEkle fonksiyonu yazalım.

Fonksiyonumuz 3 parametre alsın.alis ,satis ve TarihVeSaat bilgisi.
<pre class="brush:python"> def vtEkle(alis, satis, TarihVeSaat):  </pre>

Daha önce oluşturduğumuz  kur.db veri tabanına bağlanalım.

<pre class="brush:python"> vt = sqlite3.connect('kur.db')  </pre>

Bir imleç oluşturalım.

<pre class="brush:python"> imlec = vt.cursor()  </pre>

Tablomuza verileri eklemek için bir SQL sorgusu yazmamız gerekiyor.Bunun için bir sorgu yazalım ve execute metodu ile çalıştıralım.
(SQL hakkında daha fazla bilgi edinmek için <a href="https://www.w3schools.com/sql/" target="_blank"> burayı</a> ziyaret edebilirsiniz.)

<pre class="brush:python">
imlec.execute("INSERT INTO kurTablosu (alis,satis,zaman) VALUES(?,?,?)", (alis, satis, TarihVeSaat))
</pre>

Verilerimizi veritabanına commit metodu ile işleyelim.

<pre class="brush:python"> vt.commit()  </pre>

close() metodu ile veritabanı bağlantımızı kapatalım.

<pre class="brush:python"> vt.close()  </pre>

<br/><b>Neredeyse Bitti!</b><br/>

Kodumuz tamamlanmak üzere küçük bir eksiğimiz var.Veri tabanımıza belli aralıklarla Dolar/Tl kurundaki alış,satış,tarih ve saat bilgilerini veri tabanına eklememiz gerekiyor.

<pre class="brush:python"> while True:
    alis, satis = dolar()
    print("Alış:", alis, "Satış:", satis, "Tarih ve Saat:", datetime.datetime.now())
    vtEkle(str(alis), str(satis), str(datetime.datetime.now()))
    time.sleep(300)
</pre>
Bir döngü oluşturduk. dolar() fonksiyonumuzu çağırdık ve dönen değerleri alis ve satis değişkenine atadık.Tarih ve Saat bilgisi için datetime modülünden yararlandık.Alış ,satış, Tarih ve Saat bilgilerini vtEkle() fonksiyonu gönderdik. time.sleep(300) ile her  5 dk da  bir veritabanına verilerimizi  ekledik.

<br/><br/><b>Veritabanındaki Verileri Okumak</b><br/>
Veritabanımıza eklediğimiz bilgileri okuyalım.Bunu linux komut satırından kolayca yapabiliriz.
Bunun için sqlite3 paketinin yüklü olması gerekiyor.
<br/> <br/>
<a href="/assets/images/konsol.png" imageanchor="1"><img style="display: block;margin: 0 auto;"  src="/assets/images/konsol.png" /></a></span><br />
Terminalimizi veri tabanımızın olduğu dizinde açalım.
<br/>
Veritabanına girmek <b>sqlite3 kur.db</b> yazalım
<br/>
<b>.tables</b> ile veritabanındaki tablo isimlerine bakalım.
<br/>
<b>SELECT * FROM kurTablosu;</b> sql sorgusunu yazarak tablomuzu görelim.
<br/><br/>
Kodun tam hali görmek için <a href="https://github.com/furkanonder/furkanonder.github.io/tree/master/codes/dolarKuruSqlite.py/" target="_blank"> buraya </a>bakabilirsiniz.İyi çalışmalar dilerim.
<br/>
      </div>

      <div class="panel-footer">
        <ul class="pager panel-info">
          
          <li class="next">
            <a href="/Monte-Carlo-Methodu-Ile-Pi-Sayisinin-Hesaplanmasi" data-toggle="tooltip" data-placement="top" title="Linux ve Sinyaller">Önceki Gönderi &rarr;</a>
          </li>
          
          
          <li class="previous">
            <a href="/Linux-ve-Sinyaller" data-toggle="tooltip" data-placement="top" title="Monte Carlo Metodu ile Pi Sayısının Hesaplanması">&larr; Sonraki Gönderi</a>
          </li>
          
          <div class="post-date"></div>
          <div class="sharing-icons">
            <div class="post-date">Sosyal Medyada Paylaş!</div>
          	<a href="https://twitter.com/intent/tweet?text=Python ile SQLite’a Giriş&amp;url=/Python-ile-SQLitea-Giris" target="_blank"><i class="fa fa-twitter fa-2x" aria-hidden="true"></i></a>
            <a href="https://www.facebook.com/sharer/sharer.php?u=/Python-ile-SQLitea-Giris&amp;title=Python ile SQLite’a Giriş" target="_blank"><i class="fa fa-facebook fa-2x" aria-hidden="true"></i></a>
            <a href="https://plus.google.com/share?url=/Python-ile-SQLitea-Giris" target="_blank"><i class="fa fa-google-plus fa-2x" aria-hidden="true"></i></a>
          </div>
        </ul>
      </div>
    </div>

    
    <div class="panel panel-info">
      <div class="panel-body">
        
<div class="comments">
  <div id="disqus_thread"></div>
	<script>
	(function() {
	var d = document, s = d.createElement('script');
	s.src = 'https://furkantahaonder.disqus.com/embed.js';
	s.setAttribute('data-timestamp', +new Date());
	(d.head || d.body).appendChild(s);
	})();
	</script>
	<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
</div>


      </div>
    </div>
    
  </div>

  <div class="row2">
    <div class="col-md-12">
      <div class="panel panel-danger">
        <div class="panel-heading">
          <span class="text-primary"><b>Son Gönderiler</b></span>
        </div>
        <div class="panel-body">
          <ul>
            
            <li>
              <a href="/rtl-sdr-ile-gsm-aginda-sinyal-analizi">Rtl-Sdr ile GSM Ağında Sinyal Analizi</a>
            </li>
            
            <li>
              <a href="/tor-relay-kurulumu">Tor Relay Kurulumu</a>
            </li>
            
            <li>
              <a href="/onion-routing-nasil-calisir">Onion Routing Nasıl Çalışır?</a>
            </li>
            
          </ul>
        </div>
      </div>
    </div>
  </div>

</div>


  </div>
  <footer class="footer">
  <div class="container footerBox">
    <p class="copyright text-muted">
      &#169; 2018 Furkan Önder.Powered by Github Pages and Jekyll.
      <a href="https://github.com/furkanonder" target="_blank"><i style="font-size:28px; color:White" class="fa fa-github" ></i></a>
      <a href="https://twitter.com/Fsyscall" target="_blank"><i style="font-size:28px; color:White" class="fa fa-twitter" ></i></a>      
      <a href="https://www.linkedin.com/in/furkan-onder/" target="_blank"><i style="font-size:28px; color:White" class="fa fa-linkedin" ></i></a>
      <a href="https://medium.com/@furkanonder/" target="_blank"><i style="font-size:28px; color:White" class="fa fa-medium" ></i></a>
      <a href="/feed.xml" target="_blank"><i style="font-size:28px; color:White" class="fa fa-rss" ></i></a>
    </p>
  </div>
</footer>

<script src="/assets/js/jquery.min.js"></script>
<script src="/assets/js/bootstrap.min.js"></script>

  
	<script async src="https://www.googletagmanager.com/gtag/js?id=UA-108363583-1"></script>
	<script>
	  window.dataLayer = window.dataLayer || [];
	  function gtag(){dataLayer.push(arguments);}
	  gtag('js', new Date());
	  gtag('config', 'UA-108363583-1');
	</script>




</body>
</html>
