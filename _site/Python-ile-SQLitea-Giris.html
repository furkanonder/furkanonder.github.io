<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta charset="utf-8">
<link href="/assets/css/bootstrap.min.css" rel="stylesheet">
<link href="/assets/css/ie10-viewport-bug-workaround.css" rel="stylesheet">
<link href="/assets/css/custom.css" rel="stylesheet">
<!-- Begin Jekyll SEO tag v2.5.0 -->
<title>Python ile SQLite’a Giriş | Furkan Önder</title>
<meta name="generator" content="Jekyll v3.6.3" />
<meta property="og:title" content="Python ile SQLite’a Giriş" />
<meta name="author" content="furkan önder" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="Python ile SQLite kullanımı" />
<meta property="og:description" content="Python ile SQLite kullanımı" />
<link rel="canonical" href="http://localhost:4000/Python-ile-SQLitea-Giris" />
<meta property="og:url" content="http://localhost:4000/Python-ile-SQLitea-Giris" />
<meta property="og:site_name" content="Furkan Önder" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2018-08-04T01:30:00+03:00" />
<script type="application/ld+json">
{"author":{"@type":"Person","name":"furkan önder"},"description":"Python ile SQLite kullanımı","@type":"BlogPosting","headline":"Python ile SQLite’a Giriş","dateModified":"2018-08-04T01:30:00+03:00","datePublished":"2018-08-04T01:30:00+03:00","url":"http://localhost:4000/Python-ile-SQLitea-Giris","mainEntityOfPage":{"@type":"WebPage","@id":"http://localhost:4000/Python-ile-SQLitea-Giris"},"@context":"http://schema.org"}</script>
<!-- End Jekyll SEO tag -->

</head>
<body>
  <div class="container">
    <div class="navbar navbar-default navbar-fixed-top">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="https://furkanonder.github.io/">furkanönder</a>
    </div>
    <div class="navbar-collapse collapse">
      <ul class="nav navbar-nav navbar-right">
        <li><a href="https://furkanonder.github.io/">Anasayfa</a></li>
        <li><a href="/hakkimda/">Hakkımda</a></li>
        <li><a href="/arsiv/">Arşiv</a></li>
      </ul>
    </div>
  </div>
</div>

<div id="ust" class="row">
  <div class="col-md-12">
    <div class="panel panel-info">
      <div class="panel-heading">
        <h3 class="text-primary">Python ile SQLite’a Giriş</h3>
        <span class="text-muted">
          <time datetime="4 August 2018">
            4 Ağustos 2018
          </time>
      	</span>
      </div>

      <div class="panel-body">
        <p>Merhaba,
Bu yazımızda Python’da Veritabanı Programlama’ya bir giriş yapıcağız.Bunun için Dolar/Tl kurundaki alış ,satış değerlerini ve bu değerleri elde ettiğimiz tarih ve saati veritabanına kaydeden küçük bir bot yazacağız.Veritabanını, içinde bilgi saklanabilen,birbiriyle ilişkili olan verilerin tutulduğu, yönetilebilir, güncellenebilir ve taşınabilir bilgi topluluğu olarak adlandırabiliriz.</p>

<h2 id="sqlite-ve-python">SQLite Ve Python</h2>
<p>SQLite, python programlama dilinde varsayılan olarak gelen bir veritabanıdır. Django ve Flask gibi python ile yazılan Web Frameworklerde de  varsayılan olarak SQLite gelmektedir.SQLite, diğer veritabanlarına göre kolay bir yapıya sahiptir.</p>

<h2 id="veritabanımızı-oluşturalım">Veritabanımızı Oluşturalım</h2>
<p>Öncelikle sqlite3 kütüphanesini kodumuza dahil edelim.</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>import sqlite 
</code></pre></div></div>

<p>Veritabanımızı connect() methodu ile oluşturalım.</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>vt = sqlite3.connect('kur.db') 
</code></pre></div></div>

<p>Veritabanı üzerinde işlem yapabilmek bir imleçe ihtiyaç duyarız. cursor() methodu ile imlecimizi oluşturalım.</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>imlec = vt.cursor() 
</code></pre></div></div>

<p>Tablo oluşturmak için execute methodunu kullanıyoruz.kurTablosu adında bir tablo oluşturalım.Integer türünde sira ;varchar türünde alis, satis ve zaman değerlerine sahip olsun.Sira değişkenine  AUTOINCREMENT özelliği ekleyerek veritabanına veriler eklendikçe sıra değişkeninin artmasını sağlayalım.</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>imlec.execute('''
    CREATE TABLE kurTablosu(
    sira INTEGER PRIMARY KEY AUTOINCREMENT,
    alis VARCHAR,
    satis VARCHAR,
    zaman VARCHAR )''')
</code></pre></div></div>

<p>Verilerimizi veritabanına commit metodu ile işleyelim.</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>vt.commit() 
</code></pre></div></div>

<p>close() metodu ile veritabanı bağlantımızı kapatalım.</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>vt.close() 
</code></pre></div></div>

<h2 id="veritabanı-i̇çin-verilerin-elde-edilmesi">Veritabanı İçin Verilerin Elde Edilmesi</h2>
<p>Veritabanına eklemek için Dolar/Tl kurundaki alış ,satış değerlerini elde etmemiz gerekiyor.
Bunu kullanımımıza sunulan bir API ile kolayca yapabiliriz.API, Application Programming Interface(Uygulama Programlama Arayüzü) kelimelerinin baş harflerinden oluşan bir kısaltmadır.API’ı bir uygulamaya ait işlevlerin başka bir uygulamada kullanılmış bir arayüz olarak tanımlayabiliriz.
(API hakkında daha fazla bilgi edinmek için <a href="http://www.wiki-zero.co/index.php?q=aHR0cHM6Ly9lbi53aWtpcGVkaWEub3JnL3dpa2kvQXBwbGljYXRpb25fcHJvZ3JhbW1pbmdfaW50ZXJmYWNl" target="_blank"> burayı</a> ziyaret edebilirsiniz.)</p>

<p>Dolar/TL kurundaki alış ve satış değerlerini elde etmek için dolar adında bir fonksiyon yazalım.</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>def dolar():
    url = 'https://www.doviz.com/api/v1/currencies/USD/latest'
    istek = urllib.request.Request(url)
    i = urllib.request.urlopen(istek).read()
    veri = json.loads(i.decode('utf-8'))

    return veri['buying'], veri['selling']
</code></pre></div></div>

<p>API adresimizi url değişkenine atadık.Request fonksiyonu ile url ‘e bir istek yolladık.urlopen() fonksiyonu ile isteği açtık ve read() fonksiyonu ile okuduk.Okuduğumuz bu isteği  utf-8 türünde çözümleyip json şekline dönüştürdük.Ve son olarak  veri[‘buying’], veri[‘selling’] şeklinde alış ve satış değerlerini elde ettik ve bu iki değeri döndürdük.</p>

<h1 id="veritabanına-verilerin-eklenmesi">Veritabanına Verilerin Eklenmesi</h1>
<p>Dolar() fonksiyonunu kullanarak verilerimizi elde etmiştik.Şimdi ise bu verileri veritabanına eklemeliyiz.Bunun için ise vtEkle fonksiyonu yazalım.</p>

<p>Fonksiyonumuz 3 parametre alsın.alis ,satis ve TarihVeSaat bilgisi.</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>def vtEkle(alis, satis, TarihVeSaat):
</code></pre></div></div>

<p>Daha önce oluşturduğumuz  kur.db veri tabanına bağlanalım.</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>vt = sqlite3.connect('kur.db')
</code></pre></div></div>

<p>Bir imleç oluşturalım.</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>imlec = vt.cursor()
</code></pre></div></div>

<p>Tablomuza verileri eklemek için bir SQL sorgusu yazmamız gerekiyor.Bunun için bir sorgu yazalım ve execute metodu ile çalıştıralım.(SQL hakkında daha fazla bilgi edinmek için <a href="https://www.w3schools.com/sql/" target="_blank"> burayı</a> ziyaret edebilirsiniz.)</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>imlec.execute("INSERT INTO kurTablosu (alis,satis,zaman) VALUES(?,?,?)", (alis, satis, TarihVeSaat))
</code></pre></div></div>

<p>Verilerimizi veritabanına commit metodu ile işleyelim.</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>vt.commit()
</code></pre></div></div>

<p>close() metodu ile veritabanı bağlantımızı kapatalım.</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>vt.close()
</code></pre></div></div>

<h2 id="neredeyse-bitti">Neredeyse Bitti!</h2>

<p>Kodumuz tamamlanmak üzere küçük bir eksiğimiz var.Veri tabanımıza belli aralıklarla Dolar/Tl kurundaki alış,satış,tarih ve saat bilgilerini veri tabanına eklememiz gerekiyor.</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>while True:
    alis, satis = dolar()
    print("Alış:", alis, "Satış:", satis, "Tarih ve Saat:", datetime.datetime.now())
    vtEkle(str(alis), str(satis), str(datetime.datetime.now()))
    time.sleep(300)
</code></pre></div></div>

<p>Bir döngü oluşturduk. dolar() fonksiyonumuzu çağırdık ve dönen değerleri alis ve satis değişkenine atadık.Tarih ve Saat bilgisi için datetime modülünden yararlandık.Alış ,satış, Tarih ve Saat bilgilerini vtEkle() fonksiyonu gönderdik. time.sleep(300) ile her  5 dk da  bir veritabanına verilerimizi  ekledik.</p>

<h2 id="veritabanındaki-verileri-okumak">Veritabanındaki Verileri Okumak</h2>
<p>Veritabanımıza eklediğimiz bilgileri okuyalım.Bunu linux komut satırından kolayca yapabiliriz.
Bunun için sqlite3 paketinin yüklü olması gerekiyor.</p>

<p><a href="/assets/images/konsol.png" imageanchor="1">
  <img style="display: block;margin: 0 auto;" src="/assets/images/konsol.png" />
</a></p>

<p>Terminalimizi veri tabanımızın olduğu dizinde açalım.
Veritabanına girmek <b>sqlite3 kur.db</b> yazalım
<b>.tables</b> ile veritabanındaki tablo isimlerine bakalım.
<b>SELECT * FROM kurTablosu;</b> sql sorgusunu yazarak tablomuzu görelim.</p>

<p>Kodun tam hali görmek için <a href="https://github.com/furkanonder/furkanonder.github.io/tree/master/codes/dolarKuruSqlite.py/" target="_blank"> buraya </a>bakabilirsiniz.İyi çalışmalar dilerim.</p>

      </div>

      <div class="panel-footer">
        <ul class="pager panel-info">
          
          <li class="next">
            <a href="/Monte-Carlo-Methodu-Ile-Pi-Sayisinin-Hesaplanmasi" data-toggle="tooltip" data-placement="top" title="Linux ve Sinyaller">Önceki Gönderi &rarr;</a>
          </li>
          
          
          <li class="previous">
            <a href="/Linux-ve-Sinyaller" data-toggle="tooltip" data-placement="top" title="Monte Carlo Metodu ile Pi Sayısının Hesaplanması">&larr; Sonraki Gönderi</a>
          </li>
          
          <div class="post-date"></div>
          <div class="sharing-icons">
            <div class="post-date">Sosyal Medyada Paylaş!</div>
          	<a href="https://twitter.com/intent/tweet?text=Python ile SQLite’a Giriş&amp;url=/Python-ile-SQLitea-Giris" target="_blank"><i class="fa fa-twitter fa-2x" aria-hidden="true"></i></a>
            <a href="https://www.facebook.com/sharer/sharer.php?u=/Python-ile-SQLitea-Giris&amp;title=Python ile SQLite’a Giriş" target="_blank"><i class="fa fa-facebook fa-2x" aria-hidden="true"></i></a>
            <a href="https://plus.google.com/share?url=/Python-ile-SQLitea-Giris" target="_blank"><i class="fa fa-google-plus fa-2x" aria-hidden="true"></i></a>
          </div>
        </ul>
      </div>
    </div>

    
    <div class="panel panel-info">
      <div class="panel-body">
        
<div class="comments">
  <div id="disqus_thread"></div>
	<script>
	(function() {
	var d = document, s = d.createElement('script');
	s.src = 'https://furkantahaonder.disqus.com/embed.js';
	s.setAttribute('data-timestamp', +new Date());
	(d.head || d.body).appendChild(s);
	})();
	</script>
	<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
</div>


      </div>
    </div>
    
  </div>

  <div class="row2">
    <div class="col-md-12">
      <div class="panel panel-danger">
        <div class="panel-heading">
          <span class="text-primary"><b>Son Gönderiler</b></span>
        </div>
        <div class="panel-body">
          <ul>
            
            <li>
              <a href="/C-kodunu-gdb-ile-disassemble-etmek">C kodunu gdb ile disassemble etmek</a>
            </li>
            
            <li>
              <a href="/rtl-sdr-ile-gsm-aginda-sinyal-analizi">Rtl-Sdr ile GSM Ağında Sinyal Analizi</a>
            </li>
            
            <li>
              <a href="/tor-relay-kurulumu">Tor Relay Kurulumu</a>
            </li>
            
          </ul>
        </div>
      </div>
    </div>
  </div>

</div>


  </div>
  <footer class="footer">
  <div class="container footerBox">
    <p class="copyright text-muted">
      &#169; 2018 Furkan Önder.Powered by Github Pages and Jekyll.
      <a href="https://github.com/furkanonder" target="_blank"><i style="font-size:28px; color:White" class="fa fa-github" ></i></a>
      <a href="https://twitter.com/Fsyscall" target="_blank"><i style="font-size:28px; color:White" class="fa fa-twitter" ></i></a>      
      <a href="https://www.linkedin.com/in/furkan-onder/" target="_blank"><i style="font-size:28px; color:White" class="fa fa-linkedin" ></i></a>
      <a href="https://medium.com/@furkanonder/" target="_blank"><i style="font-size:28px; color:White" class="fa fa-medium" ></i></a>
      <a href="/feed.xml" target="_blank"><i style="font-size:28px; color:White" class="fa fa-rss" ></i></a>
    </p>
  </div>
</footer>

<script src="/assets/js/jquery.min.js"></script>
<script src="/assets/js/bootstrap.min.js"></script>

  
	<script async src="https://www.googletagmanager.com/gtag/js?id=UA-108363583-1"></script>
	<script>
	  window.dataLayer = window.dataLayer || [];
	  function gtag(){dataLayer.push(arguments);}
	  gtag('js', new Date());
	  gtag('config', 'UA-108363583-1');
	</script>




</body>
</html>
